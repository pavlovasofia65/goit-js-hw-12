{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const fetchPhotos = (query, page) => {\n    const options = {\n        key: '34921849-da8a609ca2d9d5a3e9034ffad',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: page,\n        per_page: 15,\n    }\n    const params = new URLSearchParams(options).toString();\n\n    return axios.get(`https://pixabay.com/api/?${params}`);\n};","export const createPhotoCard = photo => {\n    return `\n                <li class=\"item\">\n                    <a href=\"${photo.largeImageURL}\">\n                        <img alt=\"${photo.tags}\" src=\"${photo.webformatURL}\" width=\"360\" height=\"200\"/>\n                    </a>\n                    <div class=\"card\"><p class=\"info-item\"><b>Likes</b>${photo.likes}</p>\n                    <p class=\"info-item\"><b>Views</b>${photo.views}</p>\n                    <p class=\"info-item\"><b>Comments</b>${photo.comments}</p>\n                    <p class=\"info-item\"><b>Downloads</b>${photo.downloads}</p>\n                    </div>\n                </li>`;\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { fetchPhotos } from \"./js/pixabay-api\";\nimport { createPhotoCard } from \"./js/render-functions\";\n\nconst load = document.querySelector('.load');\nconst form = document.querySelector('.form');\nconst button = document.querySelector('.button');\nconst gallery = document.querySelector('.gallery');\nconst input = document.querySelector('.input');\nconst btnMore = document.querySelector('.btn-more');\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n});\n\nlet page = 1; \nlet totalPages = 0;\nlet query = '';\n\nconst onSearchFormSubmit = async evt => {\n    try {\n        evt.preventDefault();\n        query = input.value.trim();\n\n        if (query === '') {\n            iziToast.error({\n                message: \"Field must be filled in.\",\n                position: 'topRight',\n                timeout: 3000,\n            });\n            return;\n        }\n\n        page = 1;\n        btnMore.classList.add('hidden');\n\n        const { data } = await fetchPhotos(query, page);\n\n        if (data.hits.length === 0) {\n            gallery.innerHTML = '';\n            iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: 'topRight',\n                timeout: 3000,\n            });\n            form.reset();\n            return;\n        }\n\n        totalPages = Math.ceil(data.totalHits / 15);\n\n        if (totalPages > 1) {\n            btnMore.classList.remove('hidden');\n            btnMore.addEventListener('click', onBtnMoreClick);\n        }\n\n        const markup = data.hits.map(photo => createPhotoCard(photo) ).join(\"\");\n        gallery.innerHTML = markup;\n        lightbox.refresh();\n\n        const firstCard = document.querySelector('.gallery .item'); \n        if (firstCard) {\n            const cardHeight = firstCard.getBoundingClientRect().height;\n            window.scrollBy({\n                top: cardHeight,\n                behavior: 'smooth', \n            });\n        }\n\n    } catch (err) {\n        console.log(err);\n    }\n}\n\nconst onBtnMoreClick = async evt => {\n    try {\n        page++;\n        const { data } = await fetchPhotos(query, page);\n\n        const markup = data.hits.map(photo => createPhotoCard(photo) ).join(\"\");\n        gallery.insertAdjacentHTML('beforeend', markup);\n        lightbox.refresh();\n\n        if (page === totalPages) {\n            btnMore.classList.add('hidden');\n            btnMore.removeEventListener('click', onBtnMoreClick);\n        } \n    } catch(err) {\n        console.log(err);\n    }\n}\n\nform.addEventListener('submit', onSearchFormSubmit);\n"],"names":["fetchPhotos","query","page","options","params","axios","createPhotoCard","photo","form","gallery","input","btnMore","lightbox","SimpleLightbox","totalPages","onSearchFormSubmit","evt","iziToast","data","onBtnMoreClick","markup","firstCard","cardHeight","err"],"mappings":"wyBAEO,MAAMA,EAAc,CAACC,EAAOC,IAAS,CACxC,MAAMC,EAAU,CACZ,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAU,EACb,EACKE,EAAS,IAAI,gBAAgBD,CAAO,EAAE,SAAQ,EAEpD,OAAOE,EAAM,IAAI,4BAA4BD,CAAM,EAAE,CACzD,ECfaE,EAAkBC,GACpB;AAAA;AAAA,+BAEoBA,EAAM,aAAa;AAAA,oCACdA,EAAM,IAAI,UAAUA,EAAM,YAAY;AAAA;AAAA,yEAEDA,EAAM,KAAK;AAAA,uDAC7BA,EAAM,KAAK;AAAA,0DACRA,EAAM,QAAQ;AAAA,2DACbA,EAAM,SAAS;AAAA;AAAA,uBCD7D,SAAS,cAAc,OAAO,EAC3C,MAAMC,EAAO,SAAS,cAAc,OAAO,EAC5B,SAAS,cAAc,SAAS,EAC/C,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAQ,SAAS,cAAc,QAAQ,EACvCC,EAAU,SAAS,cAAc,WAAW,EAC5CC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,GAClB,CAAC,EAED,IAAIX,EAAO,EACPY,EAAa,EACbb,EAAQ,GAEZ,MAAMc,EAAqB,MAAMC,GAAO,CACpC,GAAI,CAIA,GAHAA,EAAI,eAAc,EAClBf,EAAQS,EAAM,MAAM,OAEhBT,IAAU,GAAI,CACdgB,EAAS,MAAM,CACX,QAAS,2BACT,SAAU,WACV,QAAS,GACzB,CAAa,EACD,MACH,CAEDf,EAAO,EACPS,EAAQ,UAAU,IAAI,QAAQ,EAE9B,KAAM,CAAE,KAAAO,CAAI,EAAK,MAAMlB,EAAYC,EAAOC,CAAI,EAE9C,GAAIgB,EAAK,KAAK,SAAW,EAAG,CACxBT,EAAQ,UAAY,GACpBQ,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,WACV,QAAS,GACzB,CAAa,EACDT,EAAK,MAAK,EACV,MACH,CAEDM,EAAa,KAAK,KAAKI,EAAK,UAAY,EAAE,EAEtCJ,EAAa,IACbH,EAAQ,UAAU,OAAO,QAAQ,EACjCA,EAAQ,iBAAiB,QAASQ,CAAc,GAGpD,MAAMC,EAASF,EAAK,KAAK,IAAIX,GAASD,EAAgBC,CAAK,CAAC,EAAG,KAAK,EAAE,EACtEE,EAAQ,UAAYW,EACpBR,EAAS,QAAO,EAEhB,MAAMS,EAAY,SAAS,cAAc,gBAAgB,EACzD,GAAIA,EAAW,CACX,MAAMC,EAAaD,EAAU,sBAAqB,EAAG,OACrD,OAAO,SAAS,CACZ,IAAKC,EACL,SAAU,QAC1B,CAAa,CACJ,CAEJ,OAAQC,EAAK,CACV,QAAQ,IAAIA,CAAG,CAClB,CACL,EAEMJ,EAAiB,MAAMH,GAAO,CAChC,GAAI,CACAd,IACA,KAAM,CAAE,KAAAgB,CAAI,EAAK,MAAMlB,EAAYC,EAAOC,CAAI,EAExCkB,EAASF,EAAK,KAAK,IAAIX,GAASD,EAAgBC,CAAK,CAAC,EAAG,KAAK,EAAE,EACtEE,EAAQ,mBAAmB,YAAaW,CAAM,EAC9CR,EAAS,QAAO,EAEZV,IAASY,IACTH,EAAQ,UAAU,IAAI,QAAQ,EAC9BA,EAAQ,oBAAoB,QAASQ,CAAc,EAE1D,OAAOI,EAAK,CACT,QAAQ,IAAIA,CAAG,CAClB,CACL,EAEAf,EAAK,iBAAiB,SAAUO,CAAkB"}